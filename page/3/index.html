<!doctype html><html lang=zh-CN><head><meta name=generator content="Hugo 0.145.0"><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=author content="白菜"><meta property="og:url" content="https://blog.baicai.me/"><link rel=canonical href=https://blog.baicai.me/><style type=text/css>body{font-family:monospace}</style><title>白菜</title>
<meta name=description content="一个勤奋的代码搬运工!"><meta name=author content="白菜"><link rel=stylesheet href=/css/style.css><link rel=stylesheet href="/css/baicai_custom.css?rnd=1743157893"><link rel=alternate type=application/rss+xml href=/index.xml title=白菜></head><body><header>============<br>== <a href=https://blog.baicai.me/>白菜</a> ==<br>============<div style=float:right>一个勤奋的代码搬运工!</div><br><p><nav><a href=/><b>Start</b></a>.
<a href=/posts/><b>文章</b></a>.
<a href=/categories/><b>分类</b></a>.
<a href=/tags/><b>标签</b></a>.
<a href=/about/><b>关于</b></a>.</nav></p></header><main><article><h1><a href=https://blog.baicai.me/article/2023/translations/>Telegram 界面自定义翻译</a></h1><b><time>2023.09.21 00:01</time></b>
<a href=/tags/telegram>telegram</a>
<a href=/tags/%E6%B1%89%E5%8C%96>汉化</a>
<a href=/tags/%E8%AF%AD%E8%A8%80%E5%8C%85>语言包</a><div><h3 id=语言包的获取方法>语言包的获取方法</h3><p>进入官网翻译界面 <a href=https://translations.telegram.org>https://translations.telegram.org</a></p><p>点击 &ldquo;Start Translating&rdquo;</p><p>选择 对应语言 比如 简体中文 进入网址</p><p><a href=https://translations.telegram.org/zh-hans/>https://translations.telegram.org/zh-hans/</a></p><p>底部有 &ldquo;Sharing Link&rdquo; 在 telegram 中打开这个网址 就可以换界面语言了。</p><p>自定义界面语言的话，选择上面的 客户端类型，根据提示 编辑对应翻译内容 即可。</p><h3 id=telegram-中文语言包>Telegram 中文语言包</h3><p><a href=https://t.me/setlanguage/zh-hans-beta>https://t.me/setlanguage/zh-hans-beta</a></p></div></article><article><h1><a href=https://blog.baicai.me/article/2023/reverse-proxy/>搭建反向代理服务：Telegram Bot Api 反向代理搭建</a></h1><b><time>2023.09.20 12:06</time></b>
<a href=/tags/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB>技术分享</a>
<a href=/tags/nginx>nginx</a>
<a href=/tags/proxy>proxy</a>
<a href=/tags/telegram>telegram</a><div><p>上面一篇通过nginx和cloudflare workers 搭建的反向代理。</p><p>这一篇通过更简单的代码重下搭建个。</p><h2 id=通过-cloudflare-workers-搭建反向代理服务>通过 Cloudflare Workers 搭建反向代理服务</h2><p>创建 Cloudflare workers 的步骤都是一样的，代码不一样。</p><h3 id=创建一个worker>创建一个Worker</h3><p>在首页选择Workers，若从未创建过则初始化，选择免费套餐，然后创建一个Worker。</p><h3 id=编辑worker内容>编辑Worker内容</h3><p>进入worker，点击快速编辑，将代码改为下方内容，其中hostname改为你自己的，然后点击保存部署，并可改名为例如cdn的worker。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#75715e>// 这就是需要代理的网址
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>hostname</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;https://example.domain&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// const hostname = &#34;http://192.168.0.1&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e>// const hostname = &#34;https://your.domain&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e>// const hostname = &#34;https://your.domain/api/path&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>handleRequest</span>(<span style=color:#a6e22e>request</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>url</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>URL</span>(<span style=color:#a6e22e>request</span>.<span style=color:#a6e22e>url</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>fetch</span>(<span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Request</span>(<span style=color:#a6e22e>hostname</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>url</span>.<span style=color:#a6e22e>pathname</span>,<span style=color:#a6e22e>request</span>))
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>addEventListener</span>(<span style=color:#e6db74>&#34;fetch&#34;</span>, <span style=color:#a6e22e>event</span> =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>event</span>.<span style=color:#a6e22e>respondWith</span>(<span style=color:#a6e22e>handleRequest</span>(<span style=color:#a6e22e>event</span>.<span style=color:#a6e22e>request</span>))
</span></span><span style=display:flex><span>})
</span></span></code></pre></div><h3 id=为域名添加dns>为域名添加DNS</h3><p>添加路由，配置</p><pre tabindex=0><code class=language-cn.you.domain/* data-lang=cn.you.domain/*></code></pre><p>指向步骤1创建的 Worker，到此等待DNS生效即可。</p><h2 id=通过-vercel-搭建反向代理服务>通过 Vercel 搭建反向代理服务</h2><p>在github中新建个项目
创建一个文件，命名为 vercel.json 文件内容：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;routes&#34;</span>: [
</span></span><span style=display:flex><span>    { <span style=color:#f92672>&#34;src&#34;</span>: <span style=color:#e6db74>&#34;/.*&#34;</span>, <span style=color:#f92672>&#34;dest&#34;</span>: <span style=color:#e6db74>&#34;https://example.domain&#34;</span>}
</span></span><span style=display:flex><span>  ]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>进入 vercel 后台 部署这个项目 配置好自定义域名，即可使用。</p><a href=https://blog.baicai.me/article/2023/reverse-proxy/>Read more...</a></div></article><article><h1><a href=https://blog.baicai.me/article/2023/nginx_tgapi_proxy/>Telegram Bot Api 反向代理搭建</a></h1><b><time>2023.09.19 22:28</time></b>
<a href=/tags/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB>技术分享</a>
<a href=/tags/nginx>nginx</a>
<a href=/tags/proxy>proxy</a>
<a href=/tags/telegram>telegram</a><div><p>由于一些原因，配置epusdt需要使用tg反向代理地址才能使用！</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-env data-lang=env><span style=display:flex><span><span style=color:#75715e>#telegram代理url(大陆地区服务器可使用一台国外服务器做反代tg的url)，如果运行的本来就是境外服务器，则无需填写</span>
</span></span><span style=display:flex><span>tg_proxy<span style=color:#f92672>=</span>
</span></span></code></pre></div><p>两种实现方案，根据个人喜好选择使用或发挥</p><h2 id=nginx反代telegram-api>Nginx反代Telegram Api</h2><h3 id=安装nginx>安装nginx</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt update <span style=color:#f92672>&amp;&amp;</span> sudo apt install -y nginx
</span></span></code></pre></div><h3 id=创建配置文件>创建配置文件</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>nano tgapi.conf
</span></span></code></pre></div><p>输入一下内容并保存</p><pre tabindex=0><code class=language-conf data-lang=conf>server {
    listen 80;
    server_name tgapi.domain;
    location / {
       return 444;
    }
    location ~* ^/bot {
        resolver 8.8.8.8;
        proxy_buffering off;
        proxy_pass      https://api.telegram.org$request_uri;
    }
}
</code></pre><h3 id=加载配置>加载配置</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo systemctl reload nginx
</span></span><span style=display:flex><span><span style=color:#75715e>#或</span>
</span></span><span style=display:flex><span>sudo nginx -s reload
</span></span></code></pre></div><h3 id=测试访问>测试访问</h3><p>输入以下命令行,BOT_TOKEN换成自己机器人token。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl https://tgapi.domain/bot&lt;BOT_TOKEN&gt;/getMe
</span></span></code></pre></div><p>看的机器人信息，就说明可以使用了。</p><h3 id=配置-epusdt-telegram代理url>配置 epusdt telegram代理url</h3><p>epusdt 配置(.env)参考</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-env data-lang=env><span style=display:flex><span><span style=color:#75715e>#telegram代理url(大陆地区服务器可使用一台国外服务器做反代tg的url)，如果运行的本来就是境外服务器，则无需填写</span>
</span></span><span style=display:flex><span>tg_proxy<span style=color:#f92672>=</span>https://tgapi.domain
</span></span></code></pre></div><h3 id=docker-配置-nginx-参考-docker-composeyam-内容>docker 配置 nginx 参考 docker-compose.yam 内容</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>version</span>: <span style=color:#e6db74>&#34;3&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>services</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>nginx</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>container_name</span>: <span style=color:#e6db74>&#34;nginx&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>restart</span>: <span style=color:#ae81ff>always</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>ports</span>:
</span></span><span style=display:flex><span>      - <span style=color:#e6db74>&#34;80:80&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>image</span>: <span style=color:#ae81ff>nginx:bookworm</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>volumes</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>./conf.d:/etc/nginx/conf.d</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>./log:/var/log/nginx</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>extra_hosts</span>:
</span></span><span style=display:flex><span>      - <span style=color:#e6db74>&#34;host.docker.internal:host-gateway&#34;</span>
</span></span></code></pre></div><h2 id=使用-cloudflare-worker-代理-telegram-bot-api>使用 Cloudflare Worker 代理 Telegram Bot Api</h2><p>使用前提</p><a href=https://blog.baicai.me/article/2023/nginx_tgapi_proxy/>Read more...</a></div></article><article><h1><a href=https://blog.baicai.me/article/2023/oracle_vps_iptables/>甲骨文Vps iptables 开放端口设置</a></h1><b><time>2023.09.18 10:20</time></b>
<a href=/tags/linux>linux</a>
<a href=/tags/vps>vps</a>
<a href=/tags/oracle>oracle</a>
<a href=/tags/iptables>iptables</a><div><p>在甲骨文的网页后台先开放端口</p><h2 id=iptables-开放所有端口>iptables 开放所有端口</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo iptables -P INPUT ACCEPT
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo iptables -P FORWARD ACCEPT
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo iptables -P OUTPUT ACCEPT
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo iptables -F
</span></span></code></pre></div><h2 id=oracle自带的镜像默认设置了iptable规则关闭它>Oracle自带的镜像默认设置了Iptable规则，关闭它</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt-get purge netfilter-persistent <span style=color:#f92672>&amp;&amp;</span> sudo reboot
</span></span></code></pre></div><p>测试端口是否已经开放</p><h2 id=附注>附注：</h2><h3 id=强制删除规则>强制删除规则</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo rm -rf /etc/iptables <span style=color:#f92672>&amp;&amp;</span> sudo reboot
</span></span></code></pre></div><h3 id=删除oracle-cloud-agent防止甲骨文监控>删除oracle-cloud-agent，防止甲骨文监控</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>snap remove oracle-cloud-agent
</span></span></code></pre></div><h3 id=检查防火墙服务状态>检查防火墙服务状态</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo systemctl status iptables.service
</span></span><span style=display:flex><span>sudo systemctl status netfilter-persistent.service
</span></span></code></pre></div><h3 id=远程检测端口开放状态>远程检测端口开放状态</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>nmap ip或域名
</span></span></code></pre></div><h2 id=附注2开放指定端口>附注2(开放指定端口):</h2><h3 id=iptables-开放指定端口>iptables 开放指定端口</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>    iptables -I INPUT -p tcp --dport <span style=color:#ae81ff>80</span> -j ACCEPT
</span></span></code></pre></div><p>中间的 80 为所需要开放的端口，tcp 为传输协议</p><a href=https://blog.baicai.me/article/2023/oracle_vps_iptables/>Read more...</a></div></article><article><h1><a href=https://blog.baicai.me/article/2023/docker_mtg/>Docker 搭建MTProto协议上网</a></h1><b><time>2023.09.07 18:00</time></b>
<a href=/tags/docker>Docker</a>
<a href=/tags/mtproto>mtproto</a><div><p>系统环境：
Debian系（其他系只需要更换apt为对应系统的软件包管理工具名称即可）</p><h2 id=安装docker>安装Docker</h2><h3 id=安装docker相关工具>安装Docker相关工具</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt update <span style=color:#f92672>&amp;&amp;</span> sudo apt -y upgrade <span style=color:#f92672>&amp;&amp;</span> sudo apt install -y docker docker.io docker-compose
</span></span></code></pre></div><h3 id=启动docker>启动docker</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo systemctl enable docker <span style=color:#f92672>&amp;&amp;</span> sudo systemctl start docker
</span></span></code></pre></div><h3 id=验证是否安装成功>验证是否安装成功</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo docker run hello-world
</span></span></code></pre></div><h2 id=mtg-v2版本-docker运行>mtg v2版本 docker运行</h2><h3 id=生成密钥>生成密钥</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo docker pull baicailin/mtg
</span></span><span style=display:flex><span>sudo docker run --rm baicailin/mtg generate-secret --hex trade.aliexpress.com
</span></span><span style=display:flex><span><span style=color:#75715e>#会看到一串ee开头的密钥，形如：</span>
</span></span><span style=display:flex><span>eexxx44f3762c8a97d14f89df8c0174726164652e616c69657870726573732e636f6d
</span></span></code></pre></div><h3 id=写入简单配置>写入简单配置</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>echo <span style=color:#e6db74>&#34;secret = \&#34;把上面一步生成的密钥填进来\&#34;&#34;</span> &gt;config.toml
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;bind-to = \&#34;0.0.0.0:443\&#34;&#34;</span> &gt;&gt;config.toml
</span></span></code></pre></div><h3 id=运行docker镜像命令>运行docker镜像命令</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo docker run -d -v $PWD/config.toml:/config.toml -p 443:443 --name baicai_mtg --restart<span style=color:#f92672>=</span>unless-stopped baicailin/mtg
</span></span></code></pre></div><h3 id=docker-compose-启动可代替上面这个命令启动方式>docker-compose 启动（可代替上面这个命令启动方式）</h3><p>一键启动 docker-compose.yaml 文件参考</p><a href=https://blog.baicai.me/article/2023/docker_mtg/>Read more...</a></div></article><article><h1><a href=https://blog.baicai.me/article/2023/docker_golang_alpine_cgo_build/>docker golang:alpine CGO 制作镜像的正确姿势</a></h1><b><time>2023.09.04 23:23</time></b>
<a href=/tags/docker>Docker</a>
<a href=/tags/golang>Golang</a><div><p>当程序需要引入C/C++库（比如支持Sqlite数据库）的时候，编译环境需要打开CGO，否则打包完成后的程序就不能顺利运行（数据库初始化失败）。</p><p>这时就需要安装 build-base 配置编译环境。</p><p>参考 Dockerfile 如下：</p><pre tabindex=0><code>FROM golang:alpine as builder
ENV CGO_ENABLED=1
WORKDIR /app
COPY . .
RUN apk add --no-cache --update git build-base
RUN go mod tidy \
	&amp;&amp; go build -o api_client_linux ./cmd/api_client/


FROM alpine:latest as runner
ENV TZ=Asia/Shanghai
RUN apk --no-cache add ca-certificates tzdata libc6-compat libgcc libstdc++
WORKDIR /app

COPY --from=builder /app/api_client_linux .
VOLUME /app/conf
EXPOSE 8080

ENTRYPOINT [&#34;./api_client_linux&#34; ,&#34;-c&#34;,&#34;/app/conf/config.yaml&#34;]
</code></pre><p>运行镜像我们也使用 Alpine ，由于 Alpine 极为精简，并没有常用的时区、证书等，会导致不可预料的错误。所以我们需要安装这些东西：</p><table><thead><tr><th style=text-align:left>包名</th><th style=text-align:left>用途</th></tr></thead><tbody><tr><td style=text-align:left>ca-certificates:</td><td style=text-align:left>CA证书，使用TLS</td></tr><tr><td style=text-align:left>tzdata:</td><td style=text-align:left>时区配置</td></tr><tr><td style=text-align:left>libc6-compat:</td><td style=text-align:left>C 标准库</td></tr><tr><td style=text-align:left>libgcc:</td><td style=text-align:left>GCC 相关库，CGO编译程序依赖</td></tr><tr><td style=text-align:left>libstdc++:</td><td style=text-align:left>C++ 标准库</td></tr></tbody></table></div></article><article><h1><a href=https://blog.baicai.me/article/2023/blog_20230902/>网站迁移完成</a></h1><b><time>2023.09.02 16:46</time></b>
<a href=/tags/%E7%BD%91%E7%AB%99%E7%BB%B4%E6%8A%A4%E8%AE%B0%E5%BD%95>网站维护记录</a><div><p>实施：</p><p>hugo + github action + git pages + cloudflare</p><p>目前通过本地 vscode 写完日志后，直接推送到 github 私有仓库，通过 github action 生成静态内容自动推送到 github pages 仓库，完成部署。</p><p>静态内容存放： github pages</p><p>域名解析使用： cloudflare</p><p>附注：</p><p>github pages 自定义域名 解析设置（支持A记录）</p><p><a href=https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site>https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site</a></p></div></article><article><h1><a href=https://blog.baicai.me/article/2023/ssh_proxycommand/>SSH使用ProxyCommand通过代理服务器远程连接其他服务器</a></h1><b><time>2023.08.31 12:12</time></b>
<a href=/tags/proxycommand>ProxyCommand</a>
<a href=/tags/ssh>ssh</a>
<a href=/tags/linux>linux</a><div><p>OpenSSH的客户端有一个 ProxyCommand 的选项，用于 SSH 客户端与服务器之间的隧道通信(tunneling)。所谓的隧道技术，也称代理技术，是网络通信技术的一个普遍概念，就是把一条信道建立于另外一条信道之上。</p><p>SSH 会话基于一个 TCP 连接，如果我们把连接的两个端口各自的出口（也即入口）进行截获，就可以用其它的信道来传输。而且 SSH 仍然认为它用的是和另一端连接一条 TCP 连接。</p><p>ProxyCommand 指定一个命令（称为 Proxy），SSH 客户端将通过标准输入输出和这个命令启动后的进程进行正常的 SSH 通信，而 Proxy 连接着 SSH 服务器（一般是一个 Server Proxy，再由该 Server Proxy 连接服务器）。</p><p>环境说明</p><pre tabindex=0><code>    远程服务器的IP地址为 0.0.0.1，代号为X；
    另一个远程服务器的IP为 0.0.0.2，代号为Y；
    目前本机的IP地址为 0.0.0.3，代号为A，本地可以利用SSH客户端通过密钥或密码连接X和Y；
</code></pre><p>这里全部使用密钥的方式进行访问，<strong>本机 A 与 Y 之间无法进行访问</strong>。</p><p>本地的
<code>～/.ssh/config</code>
的配置文件信息如下，通过X连接到Y；</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>Host X
</span></span><span style=display:flex><span>        HostName 0.0.0.1
</span></span><span style=display:flex><span>        User root
</span></span><span style=display:flex><span>        Port <span style=color:#ae81ff>22</span>
</span></span><span style=display:flex><span>        PreferredAuthentications publickey
</span></span><span style=display:flex><span>        IdentityFile ~/.ssh/id_rsa_1
</span></span><span style=display:flex><span>Host Y
</span></span><span style=display:flex><span>        HostName 0.0.0.2
</span></span><span style=display:flex><span>        User root
</span></span><span style=display:flex><span>        Port <span style=color:#ae81ff>22</span>
</span></span><span style=display:flex><span>        PreferredAuthentications publickey
</span></span><span style=display:flex><span>        IdentityFile ~/.ssh/id_rsa_2
</span></span><span style=display:flex><span>Host test
</span></span><span style=display:flex><span>    HostName 0.0.0.2
</span></span><span style=display:flex><span>    User root
</span></span><span style=display:flex><span>    Port <span style=color:#ae81ff>22</span>
</span></span><span style=display:flex><span>    IdentityFile ~/.ssh/id_rsa_2
</span></span><span style=display:flex><span>    ProxyCommand ssh X -W %h:%p
</span></span></code></pre></div><p>测试本机通过 X 连接到 Y 服务器</p><a href=https://blog.baicai.me/article/2023/ssh_proxycommand/>Read more...</a></div></article><article><h1><a href=https://blog.baicai.me/article/2023/urltest-urltest/>检查网络延时测试 URL 汇总，可用于软件测试延时</a></h1><b><time>2023.08.28 23:04</time></b>
<a href=/tags/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB>技术分享</a><div><table><thead><tr><th style=text-align:left>服务提供者</th><th style=text-align:left>链接</th><th style=text-align:center>大陆体验</th><th style=text-align:center>境外体验</th><th style=text-align:center>http/https</th><th style=text-align:center>IP Version</th><th style=text-align:left>备注</th></tr></thead><tbody><tr><td style=text-align:left>Google</td><td style=text-align:left><a href=http://www.gstatic.com/generate_204>http://www.gstatic.com/generate_204</a></td><td style=text-align:center>5</td><td style=text-align:center>10</td><td style=text-align:center>204/204</td><td style=text-align:center>4+6</td><td style=text-align:left>Google网络联通性测试地址</td></tr><tr><td style=text-align:left>Google</td><td style=text-align:left><a href=http://www.google-analytics.com/generate_204>http://www.google-analytics.com/generate_204</a></td><td style=text-align:center>6</td><td style=text-align:center>10</td><td style=text-align:center>204/204</td><td style=text-align:center>4+6</td><td style=text-align:left>Google网络联通性测试地址</td></tr><tr><td style=text-align:left>Google</td><td style=text-align:left><a href=http://www.google.com/generate_204>http://www.google.com/generate_204</a></td><td style=text-align:center>0</td><td style=text-align:center>10</td><td style=text-align:center>204/204</td><td style=text-align:center>4+6</td><td style=text-align:left>Google网络联通性测试地址</td></tr><tr><td style=text-align:left>Google</td><td style=text-align:left><a href=http://connectivitycheck.gstatic.com/generate_204>http://connectivitycheck.gstatic.com/generate_204</a></td><td style=text-align:center>4</td><td style=text-align:center>10</td><td style=text-align:center>204/204</td><td style=text-align:center>4+6</td><td style=text-align:left>Google网络联通性测试地址</td></tr><tr><td style=text-align:left>Apple</td><td style=text-align:left><a href=http://captive.apple.com>http://captive.apple.com</a></td><td style=text-align:center>3</td><td style=text-align:center>10</td><td style=text-align:center>200/200</td><td style=text-align:center>4+6</td><td style=text-align:left>苹果设备用于检测 Wi-Fi 是否需要认证登陆的链接</td></tr><tr><td style=text-align:left>Apple</td><td style=text-align:left><a href=http://www.apple.com/library/test/success.html>http://www.apple.com/library/test/success.html</a></td><td style=text-align:center>7</td><td style=text-align:center>10</td><td style=text-align:center>200/200</td><td style=text-align:center>4+6</td><td style=text-align:left>苹果设备用于检测 Wi-Fi 是否需要认证登陆的链接</td></tr><tr><td style=text-align:left>MicroSoft</td><td style=text-align:left><a href=http://www.msftconnecttest.com/connecttest.txt>http://www.msftconnecttest.com/connecttest.txt</a></td><td style=text-align:center>5</td><td style=text-align:center>10</td><td style=text-align:center>200/error</td><td style=text-align:center>4</td><td style=text-align:left>微软的网络联通性测试地址</td></tr><tr><td style=text-align:left>Cloudflare</td><td style=text-align:left><a href=http://cp.cloudflare.com/generate_204>http://cp.cloudflare.com/generate_204</a></td><td style=text-align:center>4</td><td style=text-align:center>10</td><td style=text-align:center>204/204</td><td style=text-align:center>4+6</td><td style=text-align:left>Cloudflare的联通性测试地址</td></tr><tr><td style=text-align:left>Firefox</td><td style=text-align:left><a href=http://detectportal.firefox.com/success.txt>http://detectportal.firefox.com/success.txt</a></td><td style=text-align:center>5</td><td style=text-align:center>10</td><td style=text-align:center>200/200</td><td style=text-align:center>4+6</td><td style=text-align:left>火狐的网络联通性测试地址</td></tr><tr><td style=text-align:left>V2ex</td><td style=text-align:left><a href=http://www.v2ex.com/generate_204>http://www.v2ex.com/generate_204</a></td><td style=text-align:center>0</td><td style=text-align:center>10</td><td style=text-align:center>204/301</td><td style=text-align:center>4+6</td><td style=text-align:left>v2ex 的联通性测试地址</td></tr><tr><td style=text-align:left>小米</td><td style=text-align:left><a href=http://connect.rom.miui.com/generate_204>http://connect.rom.miui.com/generate_204</a></td><td style=text-align:center>10</td><td style=text-align:center>4</td><td style=text-align:center>204/204</td><td style=text-align:center>4</td><td style=text-align:left>小米的联通性测试地址</td></tr><tr><td style=text-align:left>华为</td><td style=text-align:left><a href=http://connectivitycheck.platform.hicloud.com/generate_204>http://connectivitycheck.platform.hicloud.com/generate_204</a></td><td style=text-align:center>10</td><td style=text-align:center>5</td><td style=text-align:center>204/204</td><td style=text-align:center>4</td><td style=text-align:left>华为的联通性测试地址</td></tr><tr><td style=text-align:left>Vivo</td><td style=text-align:left><a href=http://wifi.vivo.com.cn/generate_204>http://wifi.vivo.com.cn/generate_204</a></td><td style=text-align:center>10</td><td style=text-align:center>5</td><td style=text-align:center>204/204</td><td style=text-align:center>4</td><td style=text-align:left>vivo 的联通性测试地址</td></tr></tbody></table><p>以上大陆指中国大陆，境外指非中国大陆。</p><a href=https://blog.baicai.me/article/2023/urltest-urltest/>Read more...</a></div></article><article><h1><a href=https://blog.baicai.me/article/2023/hugo_github_action_blog/>Hugo + GitHub Action + Github Pages，搭建博客自动发布</a></h1><b><time>2023.08.13 11:31</time></b>
<a href=/tags/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB>技术分享</a>
<a href=/tags/hugo>hugo</a>
<a href=/tags/github-action>github action</a>
<a href=/tags/bash>bash</a>
<a href=/tags/blog>blog</a><div><p>我的方案由以下两个核心部分：</p><ul><li>博客源仓库，对博客配置及所有文章 .md 源文件进行版本管理，配合 GitHub Action 进行自动化部署，自动生成静态站点推送到 GitHub Pages 博客发布仓库。</li><li>GitHub Pages 博客发布仓库，使用 GitHub Pages 实现网站部署，可以通过域名 CNAME 解析使用自定义域名。</li></ul><h2 id=使用-hugo-搭建博客>使用 Hugo 搭建博客</h2><p>Hugo 是用 Go 实现的博客工具，采用 Markdown 进行文章编辑，生成静态站点文件，支持丰富的主题配置，也可以通过 js 嵌入像是评论系统等插件，高度定制化。除了 Hugo 外， 还有 Gatsby、Jekyll、Hexo、Ghost 等选择，实现和使用都差不多，可以根据自己的偏好进行选择。</p><h3 id=安装-hugo>安装 Hugo</h3><p>我使用的是 macOS，所以使用官方推荐的 homebrew 方式进行 hugo 程序的安装，其他系统可参考官方文档。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>brew install hugo
</span></span></code></pre></div><p>完成后，使用以下命令进行验证(查看版本号)：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>hugo version
</span></span></code></pre></div><h3 id=创建-hugo-网站>创建 Hugo 网站</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>hugo new site blog-demo
</span></span></code></pre></div><h3 id=配置主题>配置主题</h3><p>创建我们的站点后，需要进行主题配置，Hugo 社区有很丰富的主题，可以通过官网 Themes 菜单选择自己喜欢的风格，查看预览效果，选择后可以进入主题项目仓库，一般都会有很详细的安装及配置说明。下面我就以我目前在使用的 smol 这个主题为例，演示一下配置流程。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cd blog-demo
</span></span><span style=display:flex><span>git clone  git@github.com:colorchestra/smol.git themes/smol
</span></span><span style=display:flex><span>cd themes/smol
</span></span><span style=display:flex><span>rm -rf .git
</span></span></code></pre></div><p>初始化主题基础配置后，我们可以在 config.toml 文件中进行站点细节配置，具体配置项参考主题说明文档。</p><a href=https://blog.baicai.me/article/2023/hugo_github_action_blog/>Read more...</a></div></article><div><a href=/page/2/>Previous Page</a>
3 of 8
<a href=/page/4/>Next Page</a></div></main><footer><p>&copy; 2025 <a href=https://blog.baicai.me/><b>baicai.me</b></a>.
<a href=/links/><b>友情链接</b></a>.
<a href=/index.xml><b>RSS</b></a>.</p></footer></body></html>