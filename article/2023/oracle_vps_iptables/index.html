<!doctype html><html lang=zh-CN><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=author content="白菜"><meta property="og:url" content="https://blog.baicai.me/article/2023/oracle_vps_iptables/"><link rel=canonical href=https://blog.baicai.me/article/2023/oracle_vps_iptables/><style type=text/css>body{font-family:monospace}</style><title>甲骨文Vps iptables 开放端口设置</title>
<meta name=author content="白菜"><link rel=stylesheet href=/css/style.css><link rel=stylesheet href="/css/baicai_custom.css?rnd=1730688341"></head><body><header>============<br>== <a href=https://blog.baicai.me/>白菜</a> ==<br>============<div style=float:right>一个勤奋的代码搬运工!</div><br><p><nav><a href=/><b>Start</b></a>.
<a href=/posts/><b>文章</b></a>.
<a href=/categories/><b>分类</b></a>.
<a href=/tags/><b>标签</b></a>.
<a href=/about/><b>关于</b></a>.</nav></p></header><main><article><h1>甲骨文Vps iptables 开放端口设置</h1><b><time>2023.09.18 10:20</time></b>
<a href=/tags/linux>linux</a>
<a href=/tags/vps>vps</a>
<a href=/tags/oracle>oracle</a>
<a href=/tags/iptables>iptables</a><div><p>在甲骨文的网页后台先开放端口</p><h2 id=iptables-开放所有端口>iptables 开放所有端口</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo iptables -P INPUT ACCEPT
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo iptables -P FORWARD ACCEPT
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo iptables -P OUTPUT ACCEPT
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo iptables -F
</span></span></code></pre></div><h2 id=oracle自带的镜像默认设置了iptable规则关闭它>Oracle自带的镜像默认设置了Iptable规则，关闭它</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt-get purge netfilter-persistent <span style=color:#f92672>&amp;&amp;</span> sudo reboot
</span></span></code></pre></div><p>测试端口是否已经开放</p><h2 id=附注>附注：</h2><h3 id=强制删除规则>强制删除规则</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo rm -rf /etc/iptables <span style=color:#f92672>&amp;&amp;</span> sudo reboot
</span></span></code></pre></div><h3 id=删除oracle-cloud-agent防止甲骨文监控>删除oracle-cloud-agent，防止甲骨文监控</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>snap remove oracle-cloud-agent
</span></span></code></pre></div><h3 id=检查防火墙服务状态>检查防火墙服务状态</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo systemctl status iptables.service
</span></span><span style=display:flex><span>sudo systemctl status netfilter-persistent.service
</span></span></code></pre></div><h3 id=远程检测端口开放状态>远程检测端口开放状态</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>nmap ip或域名
</span></span></code></pre></div><h2 id=附注2开放指定端口>附注2(开放指定端口):</h2><h3 id=iptables-开放指定端口>iptables 开放指定端口</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>    iptables -I INPUT -p tcp --dport <span style=color:#ae81ff>80</span> -j ACCEPT
</span></span></code></pre></div><p>中间的 80 为所需要开放的端口，tcp 为传输协议</p><h4 id=保存规则>保存规则</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>    iptables-save
</span></span></code></pre></div><p>上述命令我们就完成了开放指定的端口，但是如果此时服务器重启，上述规则就没有了，所以我们需要对规则进行一下持久化操作</p><h3 id=安装-iptables-persistent>安装 iptables-persistent</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>    sudo apt-get install iptables-persistent
</span></span></code></pre></div><h4 id=持久化规则>持久化规则</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>    sudo netfilter-persistent save
</span></span><span style=display:flex><span>    sudo netfilter-persistent reload
</span></span></code></pre></div></div></article></main><aside><div><div><h3>LATEST POSTS</h3></div><div><ul><li><a href=/article/2024/docker_export_import_save_load/>Docker本地镜像的导出、导入 (export,import,save,load)</a></li><li><a href=/article/2024/fmt_int/>Go语言进制以及进制转换</a></li><li><a href=/article/2024/cmd_sqlite/>Mac终端查看sqlite3数据库</a></li><li><a href=/article/2024/debian_ufw_docker/>解决 UFW 和 Docker 的问题</a></li><li><a href=/article/2024/docker_ports/>docker 映射某个范围内的端口列表</a></li></ul></div></div></aside><footer><p>&copy; 2024 <a href=https://blog.baicai.me/><b>baicai.me</b></a>.
<a href=/links/><b>友情链接</b></a>.
<a href=/index.xml><b>RSS</b></a>.</p></footer></body></html>