<!doctype html><html lang=zh-CN><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=author content="白菜"><meta property="og:url" content="https://blog.baicai.me/article/2024/docker_export_import_save_load/"><link rel=canonical href=https://blog.baicai.me/article/2024/docker_export_import_save_load/><style type=text/css>body{font-family:monospace}</style><title>Docker本地镜像的导出、导入 (export,import,save,load)</title>
<meta name=author content="白菜"><link rel=stylesheet href=/css/style.css><link rel=stylesheet href="/css/baicai_custom.css?rnd=1740324580"></head><body><header>============<br>== <a href=https://blog.baicai.me/>白菜</a> ==<br>============<div style=float:right>一个勤奋的代码搬运工!</div><br><p><nav><a href=/><b>Start</b></a>.
<a href=/posts/><b>文章</b></a>.
<a href=/categories/><b>分类</b></a>.
<a href=/tags/><b>标签</b></a>.
<a href=/about/><b>关于</b></a>.</nav></p></header><main><article><h1>Docker本地镜像的导出、导入 (export,import,save,load)</h1><b><time>2024.10.11 14:53</time></b>
<a href=/tags/docker>Docker</a><div><p>对于镜像的导出和导入，Docker 提供了两种方案，下面分别进行介绍。</p><h2 id=一使用-export-和-import>一、使用 export 和 import</h2><h3 id=1查看本机的容器>1，查看本机的容器</h3><p>使用 <code>docker ps -a</code> 命令查看本机所有的容器。</p><h3 id=2导出镜像>2，导出镜像</h3><p>（1）使用 <code>docker export</code> 命令根据容器 ID 将镜像导出成一个文件。</p><p><code>docker export 镜像ID > server.tar</code></p><p>（2）上面命令执行后，可以看到文件已经保存到当前的终端目录下。</p><h3 id=3导入镜像>3，导入镜像</h3><p>（1）使用 <code>docker import</code> 命令则可将这个镜像文件导入进来。</p><p><code>docker import - new_server &lt; server.tar</code></p><p>（2）执行 <code>docker images</code> 命令可以看到镜像确实已经导入进来了。</p><h2 id=二使用-save-和-load>二、使用 save 和 load</h2><h3 id=1查看本机的容器-1>1，查看本机的容器</h3><p>这两个命令是通过镜像来保存、加载镜像文件的。首先我们使用 <code>docker images</code> 命令查看本机所有的镜像。</p><h3 id=2保存镜像>2，保存镜像</h3><p>（1）下面使用 <code>docker save</code> 命令根据 ID 将镜像保存成一个文件。</p><p><code>docker save 镜像ID > server.tar</code></p><p>（2）我们还可以同时将多个 image 打包成一个文件，比如下面将镜像库中的 postgres 和 mongo 打包：</p><p><code>docker save -o images.tar postgres mongo</code></p><h3 id=3载入镜像>3，载入镜像</h3><p>使用 <code>docker load</code> 命令则可将这个镜像文件载入进来。</p><p><code>docker load &lt; server.tar</code></p><h2 id=附两种方案的差别>附：两种方案的差别</h2><p>特别注意：两种方法不可混用。<br>如果使用 <code>import</code> 导入 <code>save</code> 产生的文件，虽然导入不提示错误，但是启动容器时会提示失败，会出现类似"docker: Error response from daemon: Container command not found or does not exist"的错误。</p><h3 id=1文件大小不同>1，文件大小不同</h3><p>export 导出的镜像文件体积小于 save 保存的镜像</p><h3 id=2是否可以对镜像重命名>2，是否可以对镜像重命名</h3><p>docker import 可以为镜像指定新名称
docker load 不能对载入的镜像重命名</p><h3 id=3是否可以同时将多个镜像打包到一个文件中>3，是否可以同时将多个镜像打包到一个文件中</h3><p>docker export 不支持
docker save 支持</p><h3 id=4是否包含镜像历史>4，是否包含镜像历史</h3><p>export 导出（import 导入）是根据容器拿到的镜像，再导入时会丢失镜像所有的历史记录和元数据信息（即仅保存容器当时的快照状态），所以无法进行回滚操作。</p><p>save 保存（load 加载）的镜像，没有丢失镜像的历史，可以回滚到之前的层（layer）。</p><h3 id=5应用场景不同>5，应用场景不同</h3><p>docker export 的应用场景：主要用来制作基础镜像，比如我们从一个 ubuntu 镜像启动一个容器，然后安装一些软件和进行一些设置后，使用 docker export 保存为一个基础镜像。然后，把这个镜像分发给其他人使用，比如作为基础的开发环境。</p><p>docker save 的应用场景：如果我们的应用是使用 docker-compose.yml 编排的多个镜像组合，但我们要部署的客户服务器并不能连外网。这时就可以使用 docker save 将用到的镜像打个包，然后拷贝到客户服务器上使用 docker load 载入。</p></div></article></main><aside><div><div><h3>LATEST POSTS</h3></div><div><ul><li><a href=/article/2025/nginx_too_many_open_files/>Nginx 出现 Too many open files 错误与修复</a></li><li><a href=/article/2025/ifconfig_interfaces/>Debian12 系统添加多个IP</a></li><li><a href=/article/2025/linux_curl/>linux测试url的访问速度</a></li><li><a href=/article/2025/giffgaff_wificall/>Giffgaff 打开 wificall 的操作步骤及分流规则</a></li><li><a href=/article/2024/docker_export_import_save_load/>Docker本地镜像的导出、导入 (export,import,save,load)</a></li></ul></div></div></aside><footer><p>&copy; 2025 <a href=https://blog.baicai.me/><b>baicai.me</b></a>.
<a href=/links/><b>友情链接</b></a>.
<a href=/index.xml><b>RSS</b></a>.</p></footer></body></html>